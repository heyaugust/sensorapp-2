<h1>Sensor App</h1>

<p>
  Welcome! Select floor:  
  <%= select("storey", "id", Storey.all.collect {|p| [ p.name, p.id ] }, { include_blank: true }) %>

<script>
$.ready(function() { 
	$('select').on('change',function() { 
		var val = $(this).val(); // returns the id 
		$('.room').hide(); 
		$('.room[data-storey-id=' + val + ']').show(); 
	}); 
})
</script>

<table>
  <thead>
    <tr>
      <th>Room</th>
      <th>Pax</th> 
      <th colspan="3"></th>
    </tr>
  </thead>

	<tbody>
		
	<%- Storey.all.each do |storey| %> 
		<%- storey.rooms.each do |room| %> 
			<div class='room', data-storey-id="#{storey.id}" style='display:none'> 	
				<tr>
		         	<td><%= room.name %></td>
				 	<td><%= room.pax %></td>
				 	<td><button>Book</button>
				</tr>
			</div> 
		<%- end %> 
	<%- end %>
	      
	</tbody>
</table>


<div class="storey">
	<%= link_to 'Storey', storeys_path %>
</div>

<div class="room">
	<%= link_to 'Room', rooms_path %>
</div>

</p>
